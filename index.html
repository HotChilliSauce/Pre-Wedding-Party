<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Wedding Party | JinBae & YuGyung</title>
    <meta name="description" content="2026ë…„ 3ì›” 28ì¼ (í† ) ì¼€ë¯¸ìŠ¤íŠ¸ë¦¬(ê°•ë‚¨) - JinBae & YuGyung Pre-Wedding Partyì— ì´ˆëŒ€í•©ë‹ˆë‹¤.">
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hotchillisauce.github.io/Pre-Wedding-Party/">
    <meta property="og:title" content="Pre-Wedding Party | JinBae ğŸ¤ YuGyung">
    <meta property="og:description" content="2026. 03. 28 ì¼€ë¯¸ìŠ¤íŠ¸ë¦¬, ëª¨ë‘ í•¨ê»˜í•˜ëŠ” í”„ë¦¬ì›¨ë”© íŒŒí‹°ì— ì´ˆëŒ€í•©ë‹ˆë‹¤!">
    <meta property="og:image" content="https://hotchillisauce.github.io/Pre-Wedding-Party/og-thumbnail.png">
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://hotchillisauce.github.io/Pre-Wedding-Party/">
    <meta name="twitter:title" content="Pre-Wedding Party | JinBae ğŸ¤ YuGyung">
    <meta name="twitter:description" content="2026. 03. 28 ì¼€ë¯¸ìŠ¤íŠ¸ë¦¬(ê°•ë‚¨)ì—ì„œ ë§Œë‚˜ìš”!">
    <meta name="twitter:image" content="https://hotchillisauce.github.io/Pre-Wedding-Party/og-thumbnail.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; background: #0a0a0a; color: #fff; font-family: 'Noto Sans KR', sans-serif; min-height: 100vh; padding: 0; }
        .dreamy-bg { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #000 100%); z-index: -1; }
        .blob { position: absolute; background: rgba(255,255,255,0.06); filter: blur(88px); border-radius: 50%; animation: float 18s infinite alternate; pointer-events: none; z-index: -1;}
        .blob1 {width: 450px; height: 450px; top: -12%; left: -10%;}
        .blob2 {width: 330px; height: 330px; bottom: -9%; right: -7%; animation-delay: -7s;}
        .blob3 {width: 220px; height: 220px; top: 47%; right: 7%; animation-delay: -12s;}
        @keyframes float {0%{transform:translate(0,0) scale(1);}100%{transform:translate(68px,30px) scale(1.13);}}
        .glass-card { background: rgba(19, 19, 19, 0.86); border: 1.5px solid rgba(255,255,255,0.13); border-radius: 2.1rem; margin: 3.5rem auto 2rem auto; box-shadow: 0 8px 32px 0 rgba(0,0,0,0.92); max-width: 600px; text-align: center; position: relative; padding: 2.6rem 1.2rem 2.3rem 1.2rem; z-index: 5; backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);}
        .serif { font-family: 'Playfair Display', serif; letter-spacing: 0.05em;}
        .divider { margin: 2.0rem auto 1.5rem auto; height: 1.3px; width: 88%; background: linear-gradient(90deg, transparent,rgba(255,255,255,.25),transparent);}
        .shimmer {background: linear-gradient(90deg,#fff 20%,#cfcfcf 55%,#fff 80%);background-size: 220% auto;-webkit-background-clip: text;-webkit-text-fill-color: transparent;animation: shimmer 4s linear infinite;}
        @keyframes shimmer { to { background-position: 220% center; } }
        .btn-row {display: flex; gap: 10px; justify-content: center; margin-top: 0.3em; margin-bottom: 1.3em; flex-wrap: wrap;}
        .glass-card footer .mt-7 {margin-top:2.2rem!important;}
        .rsvp-row {display: flex; justify-content: center; align-items: center; gap: 1.2em; margin-bottom: 1.3em; margin-top: 1.8em;}
        .rsvp-row button[disabled] {opacity: 0.45; cursor: default;}
        .rsvp-msg {color:#69fdff;text-align:center;margin-top:0.45em;font-size:1.07em;}
        /* Guestbook ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-bg { display:none; position:fixed; z-index:1000; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.42);}
        .modal-content { background:#191a1f; border-radius:24px; max-width:440px; width:92vw; margin:9vh auto; padding:2.1rem 1.3rem 1.4rem 1.3rem; position:relative; box-shadow:0 12px 40px rgba(0,0,0,0.18);}
        .modal-content h2 { text-align:center; margin-bottom:1.2rem; font-size:1.65rem;}
        .modal-content form { display:flex; flex-direction:column; gap:0.8em; margin-bottom:1.1rem;}
        .modal-content input, .modal-content textarea { width:100%; padding:0.7em; border-radius:9px; border:none; background:rgba(255,255,255,0.1); color:white; font-size:1.04rem; }
        .modal-content button[type=submit] {margin-top: 0.4em; width:100%; padding:0.83em; border-radius:9px; font-size:1.09rem; background:#222; color:white; border:none; font-family:'Noto Sans KR',sans-serif; cursor:pointer;}
        #guestbookScrollArea {max-height:285px; overflow-y:auto; border-radius:16px; background:rgba(255,255,255,0.045);padding:1.1em;}
        .guestbook-entry {background: rgba(255,255,255,0.07); border-left: 3px solid #62f0ff4a; padding: 1.1em 1em 1em 1em; margin-bottom: 1.03em; border-radius: 11px; color: #efeef8; box-shadow:0 2px 16px rgba(0,0,0,0.10);}
        .guestbook-entry b {font-weight:700;color:white;font-size:1.08em;}
        .guestbook-entry span {color:#9cf;font-size:0.93em;margin-left:10px;}
        .guestbook-entry div {margin-top:0.3em;color:#DFF;font-size:1.09em;word-break:break-all;}
        #guestbookLoading {text-align:center;padding-top:0.4em;color:#bbb;font-size:0.98em;}
        @media (max-width:700px) {.modal-content {padding:1.3rem 0.7rem 1.1rem 0.7rem;}}
    </style>
</head>
<body>
    <div class="dreamy-bg">
        <div class="blob blob1"></div>
        <div class="blob blob2"></div>
        <div class="blob blob3"></div>
    </div>
    <main class="glass-card fade-in">
        <header class="mb-7">
            <h1 class="serif text-5xl md:text-6xl font-light tracking-widest shimmer mb-4">
                Pre-Wedding Party
            </h1>
            <div class="flex items-center justify-center gap-4 text-lg md:text-xl font-light tracking-widest text-gray-300">
                <span class="serif italic">Park JinBae</span>
                <span class="text-xs opacity-50">ğŸ¤</span>
                <span class="serif italic">Oh YuGyung</span>
            </div>
        </header>
        <div class="divider"></div>
        <section class="space-y-8 my-10 mb-7">
            <div class="space-y-2">
                <p class="text-xs tracking-[0.3em] text-gray-400 uppercase">When</p>
                <div class="text-xl md:text-2xl font-light">
                    2026. 03. 28 <span class="text-sm mx-1">SAT</span>
                </div>
                <p class="text-sm font-light text-gray-300">
                    p.m. 7:00 â€” a.m. 3:00 (ìµì¼)
                </p>
            </div>
            <div class="space-y-2">
                <p class="text-xs tracking-[0.3em] text-gray-400 uppercase">Where</p>
                <div class="text-xl font-light">
                    ì¼€ë¯¸ìŠ¤íŠ¸ë¦¬ (Chemistry)
                </div>
                <p class="text-sm font-light text-gray-400 leading-relaxed">
                    ì„œìš¸ ê°•ë‚¨êµ¬ ì–¸ì£¼ë¡œ94ê¸¸ 5, 2ì¸µ
                </p>
            </div>
        </section>
        <div class="rsvp-row">
            <button id="rsvpBtn" class="px-6 py-3 border border-white/20 rounded-full text-xs tracking-widest hover:bg-white hover:text-black transition-all duration-500 uppercase bg-transparent">
                ì´ˆëŒ€ ìˆ˜ë½
            </button>
            <span id="rsvpCount" class="text-xl font-bold text-white">0</span>
        </div>
        <div id="rsvpMsg" class="rsvp-msg"></div>
        <div class="btn-row">
            <a href="https://map.kakao.com/?q=ì„œìš¸ ê°•ë‚¨êµ¬ ì–¸ì£¼ë¡œ94ê¸¸ 5" target="_blank" class="inline-block px-8 py-3 border border-white/20 rounded-full text-xs tracking-widest hover:bg-white hover:text-black transition-all duration-500 uppercase">
                View Map
            </a>
            <button id="openGuestbook" class="inline-block px-8 py-3 border border-white/20 rounded-full text-xs tracking-widest hover:bg-white hover:text-black transition-all duration-500 uppercase bg-transparent">
                Guest Book
            </button>
        </div>
        <div class="divider"></div>
        <footer class="mt-6 mb-2">
            <div class="text-sm font-light text-gray-400 leading-loose mb-2">
                ì €í¬ì˜ ìƒˆë¡œìš´ ì‹œì‘ì„ ì•ë‘ê³ <br>
                ì†Œì¤‘í•œ ë¶„ë“¤ì„ ëª¨ì‹œê³  ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ë‚´ê³ ì í•©ë‹ˆë‹¤.<br>
                í•¨ê»˜ ìë¦¬ë¥¼ ë¹›ë‚´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.
            </div>
            <div class="mt-7 opacity-20 text-[10px] tracking-[0.5em] uppercase">
                Strictly Black & White
            </div>
        </footer>
    </main>
    <!-- Guestbook Modal -->
    <div id="guestbookModal" class="modal-bg" style="display:none">
        <div class="modal-content">
            <button id="closeGuestbook" style="position:absolute;top:1rem;right:1rem;font-size:2rem;color:#ccc;background:transparent;border:none;">Ã—</button>
            <h2 class="serif">Guest Book</h2>
            <form id="guestbookForm">
                <input type="text" id="guestName" placeholder="ì´ë¦„ / Name" required autocomplete="off">
                <textarea id="guestMessage" placeholder="ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš” / Leave your message..." rows="3" required autocomplete="off"></textarea>
                <button type="submit">ë©”ì‹œì§€ ë‚¨ê¸°ê¸° / Submit Message</button>
            </form>
            <div id="guestbookScrollArea">
                <div id="guestbookMessages"></div>
                <div id="guestbookLoading"></div>
            </div>
        </div>
    </div>
    <script type="module">
    let modalOpened = false;

    const openBtn = document.getElementById('openGuestbook');
    const modal = document.getElementById('guestbookModal');
    const closeBtn = document.getElementById('closeGuestbook');
    const guestbookMessages = document.getElementById('guestbookMessages');
    const guestbookScrollArea = document.getElementById('guestbookScrollArea');
    const guestbookLoading = document.getElementById('guestbookLoading');
    const guestbookForm = document.getElementById('guestbookForm');
    openBtn.onclick = () => {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
        if(!modalOpened) {
            guestbookMessages.innerHTML = '';
            loadedKeys = [];
            hasMore = true;
            loadMoreGuestbook();
            modalOpened = true;
        }
    };
    closeBtn.onclick = () => {
        modal.style.display = 'none';
        document.body.style.overflow = '';
        modalOpened = false;
    };
    modal.onclick = e => {
        if(e.target === modal) {
            modal.style.display = 'none';
            document.body.style.overflow = '';
            modalOpened = false;
        }
    };

    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
    import { getDatabase, ref, get, set, onValue, push, query, orderByKey, limitToLast, endBefore } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCFrTzMJEZMpxChJ_lsj_RdtPC87wzvI4U",
        authDomain: "pre-wedding-party.firebaseapp.com",
        databaseURL: "https://pre-wedding-party-default-rtdb.firebaseio.com",
        projectId: "pre-wedding-party",
        storageBucket: "pre-wedding-party.firebaseapp.com",
        messagingSenderId: "642438297363",
        appId: "1:642438297363:web:979d7db7511f2a4f6b4ce6",
        measurementId: "G-3HWLRVWQWC"
    };
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // ì°¸ì„ ì¹´ìš´íŠ¸ (ì¤‘ë³µë°©ì§€)
    const rsvpRef = ref(db, "rsvpCount");
    const rsvpCountSpan = document.getElementById('rsvpCount');
    onValue(rsvpRef, snap => {
        const val = snap.val();
        rsvpCountSpan.textContent = val ? val : 0;
    });
    const rsvpBtn = document.getElementById('rsvpBtn');
    const rsvpMsg = document.getElementById('rsvpMsg');
    function isRSVPed() { return localStorage.getItem('preWeddingRSVPed2026') === 'yes'; }
    function setRSVPed() { localStorage.setItem('preWeddingRSVPed2026', 'yes'); }
    function updateRSVPBtn() {
        if(isRSVPed()) {
            rsvpBtn.disabled = true;
            rsvpBtn.textContent = "ì°¸ì„ í™•ì¸ ì™„ë£Œ";
            rsvpMsg.textContent = "ì´ë¯¸ ì°¸ì„ ìˆ˜ë½í•˜ì…¨ìŠµë‹ˆë‹¤!";
        } else {
            rsvpBtn.disabled = false;
            rsvpBtn.textContent = "ì´ˆëŒ€ ìˆ˜ë½";
            rsvpMsg.textContent = "";
        }
    }
    updateRSVPBtn();
    rsvpBtn.onclick = async function() {
        if(isRSVPed()) return;
        const snap = await get(rsvpRef);
        let val = snap.val();
        if(typeof val !== "number") val = 0;
        await set(rsvpRef, val + 1);
        setRSVPed();
        updateRSVPBtn();
    };

    // dreamy-blob ë°°ê²½ ë§ˆìš°ìŠ¤ íŠ¸ë˜í‚¹
    document.addEventListener('mousemove', (e) => {
        const x = e.clientX / window.innerWidth;
        const y = e.clientY / window.innerHeight;
        document.querySelectorAll('.blob').forEach((blob, i) => {
            const speed = (i+1)*18;
            blob.style.transform = `translate(${x * speed}px, ${y * speed}px)`;
        });
    });

    // ë°©ëª…ë¡ ì‘ì„±
    guestbookForm.onsubmit = async function(e){
        e.preventDefault();
        const name = document.getElementById('guestName').value.trim();
        const message = document.getElementById('guestMessage').value.trim();
        if(name && message) {
            await push(ref(db, "guestbook"), { name, message, date: new Date().toISOString() });
            guestbookForm.reset();
            guestbookMessages.innerHTML = '';
            loadedKeys = [];
            hasMore = true;
            loadMoreGuestbook();
        }
    };

    // ë¬´í•œìŠ¤í¬ë¡¤
    function escapeHtml(text) {
        var div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
    let loadedKeys = [];
    let hasMore = true;
    const PAGE_SIZE = 10;
    async function loadMoreGuestbook() {
        if(!hasMore) return;
        guestbookLoading.innerText = 'ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...';
        let q;
        if(loadedKeys.length === 0) {
            q = query(ref(db, "guestbook"), orderByKey(), limitToLast(PAGE_SIZE));
        } else {
            q = query(ref(db, "guestbook"), orderByKey(), endBefore(loadedKeys[0]), limitToLast(PAGE_SIZE));
        }
        const snap = await get(q);
        const arr = [];
        snap.forEach(child => arr.push({ key: child.key, ...child.val() }));
        if(arr.length === 0) {
            hasMore = false;
            guestbookLoading.innerText = 'ë” ì´ìƒ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤.';
            return;
        }
        arr.reverse().forEach(msg => {
            loadedKeys.unshift(msg.key);
            guestbookMessages.innerHTML += `
                <div class="guestbook-entry">
                  <b>${escapeHtml(msg.name)}</b>
                  <span>${(new Date(msg.date)).toLocaleDateString('ko-KR')}</span>
                  <div>${escapeHtml(msg.message).replace(/\\n/g,"<br>")}</div>
                </div>
              `;
        });
        guestbookLoading.innerText = hasMore ? 'ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ë©´ ë” ë³¼ ìˆ˜ ìˆì–´ìš” â¬‡ï¸' : '';
    }
    guestbookScrollArea.addEventListener('scroll', function() {
        if(!hasMore) return;
        if(this.scrollTop + this.offsetHeight >= this.scrollHeight - 30) {
            loadMoreGuestbook();
        }
    });

    window.onerror = function(msg,src,linen,coln,err){console.log(msg,src,linen,coln,err);}
    </script>
</body>
</html>
